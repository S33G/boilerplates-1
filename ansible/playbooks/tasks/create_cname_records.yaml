---
# tasks file for cloudflare
- name: Loop through all containers create a CNAME record
  community.general.cloudflare_dns:
    zone: "chkpwd.com"
    record: "{{ item }}.chkpwd.com"
    type: CNAME
    value: "@"
    state: present
    account_email: mentality@protonmail.com
    account_api_token: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      37363337643733396662366462353039303336373237616339393936633239356635313364643562
      6638333738323161656462613936396532303766656333350a306361326166393465666163646164
      33623764346638373562633435393635323133353134626163643036373061346463393136326262
      3133313033623837370a663935643537333938383231643764656134623133303965306534363035
      32393262393761373638643533663535396433353534303134373835663761633135363833346266
      3938386235653065653839333666366536303431303362623463
    proxied: true
  loop: "{{ cname_records }}"